[gd_resource type="VisualShader" load_steps=11 format=3 uid="uid://bokiwp2ggoptf"]

[ext_resource type="Script" path="res://addons/ShaderLib/Procedural/Noise/GradientNoise.gd" id="1_e374b"]

[sub_resource type="VisualShaderNodeVectorCompose" id="VisualShaderNodeVectorCompose_qc02g"]
default_input_values = [0, 0.1, 1, 0.0, 2, 0.0]

[sub_resource type="VisualShaderNodeInput" id="VisualShaderNodeInput_qslc7"]
output_port_for_preview = 0
input_name = "uv"

[sub_resource type="VisualShaderNodeVectorOp" id="VisualShaderNodeVectorOp_r80rg"]
default_input_values = [0, Vector2(0, 0), 1, Vector2(0, 0)]
op_type = 0

[sub_resource type="VisualShaderNodeVectorCompose" id="VisualShaderNodeVectorCompose_tv6t3"]
op_type = 0

[sub_resource type="VisualShaderNodeCustom" id="VisualShaderNodeCustom_ptuky"]
output_port_for_preview = 0
default_input_values = [1, 10.0]
initialized = true
script = ExtResource("1_e374b")

[sub_resource type="VisualShaderNodeFloatOp" id="VisualShaderNodeFloatOp_wpr7f"]
default_input_values = [0, 0.75, 1, 0.0]
operator = 2

[sub_resource type="VisualShaderNodeClamp" id="VisualShaderNodeClamp_81lvi"]
default_input_values = [0, 0.0, 1, 0.0, 2, 0.7]

[sub_resource type="VisualShaderNodeInput" id="VisualShaderNodeInput_u0fcc"]
input_name = "time"

[sub_resource type="VisualShaderNodeFloatOp" id="VisualShaderNodeFloatOp_jgkkp"]
default_input_values = [0, 0.0, 1, 1.0]
operator = 2

[resource]
code = "shader_type spatial;
render_mode blend_mix, depth_draw_opaque, cull_back, diffuse_lambert, specular_schlick_ggx;



// GradientNoise
vec2 gradient_modulo(vec2 divident, vec2 divisor){
	vec2 _positive_divident = mod(divident, divisor) + divisor;
	return mod(_positive_divident, divisor);
}

vec2 gradient_random(vec2 uv){
	uv = vec2(dot(uv, vec2(127.1,311.7)), dot(uv, vec2(269.5,183.3)));
	return -1.0 + 2.0 * fract(sin(uv) * 43758.5453123);
}

float gradient_noise(vec2 uv, float scale) {
	uv = uv * float(scale);
	vec2 _period = vec2(30.0, 60.0);
	vec2 _cells_minimum = floor(uv);
	vec2 _cells_maximum = ceil(uv);
	vec2 _uv_fract = fract(uv);
	_cells_minimum = gradient_modulo(_cells_minimum, _period);
	_cells_maximum = gradient_modulo(_cells_maximum, _period);
	vec2 _blur = smoothstep(0.0, 1.0, _uv_fract);
	vec2 _lowerLeftDirection = gradient_random(vec2(_cells_minimum.x, _cells_minimum.y));
	vec2 _lowerRightDirection = gradient_random(vec2(_cells_maximum.x, _cells_minimum.y));
	vec2 _upperLeftDirection = gradient_random(vec2(_cells_minimum.x, _cells_maximum.y));
	vec2 _upperRightDirection = gradient_random(vec2(_cells_maximum.x, _cells_maximum.y));
	vec2 _fraction = fract(uv);
	float _mix_one = mix(dot(_lowerLeftDirection, _fraction - vec2(0, 0)), dot(_lowerRightDirection, _fraction - vec2(1, 0)), _blur.x);
	float _mix_two = mix(dot(_upperLeftDirection, _fraction - vec2(0, 1)), dot(_upperRightDirection, _fraction - vec2(1, 1)), _blur.x);
	return mix(_mix_one, _mix_two, _blur.y) * 0.8 + 0.5;
}

void fragment() {
// Input:12
	vec2 n_out12p0 = UV;


// VectorCompose:10
	float n_in10p0 = 0.10000;
	float n_in10p1 = 0.00000;
	float n_in10p2 = 0.00000;
	vec3 n_out10p0 = vec3(n_in10p0, n_in10p1, n_in10p2);


// Input:5
	float n_out5p0 = TIME;


// FloatOp:9
	float n_out9p0 = n_out10p0.x * n_out5p0;


// VectorCompose:15
	float n_in15p1 = 0.00000;
	vec2 n_out15p0 = vec2(n_out9p0, n_in15p1);


// VectorOp:14
	vec2 n_out14p0 = n_out12p0 + n_out15p0;


	float n_out17p0;
// GradientNoise:17
	float n_in17p1 = 10.00000;
	{
		n_out17p0 = gradient_noise(n_out14p0, n_in17p1);
	}


// Clamp:20
	float n_in20p1 = 0.00000;
	float n_in20p2 = 0.70000;
	float n_out20p0 = clamp(n_out17p0, n_in20p1, n_in20p2);


// FloatOp:18
	float n_in18p0 = 0.75000;
	float n_out18p0 = n_in18p0 * n_out20p0;


// Output:0
	ALBEDO = vec3(n_out18p0);
	ALPHA = n_out18p0;


}
"
nodes/fragment/0/position = Vector2(580, 120)
nodes/fragment/5/node = SubResource("VisualShaderNodeInput_u0fcc")
nodes/fragment/5/position = Vector2(-620, 160)
nodes/fragment/9/node = SubResource("VisualShaderNodeFloatOp_jgkkp")
nodes/fragment/9/position = Vector2(-280, 20)
nodes/fragment/10/node = SubResource("VisualShaderNodeVectorCompose_qc02g")
nodes/fragment/10/position = Vector2(-560, -80)
nodes/fragment/12/node = SubResource("VisualShaderNodeInput_qslc7")
nodes/fragment/12/position = Vector2(-660, 340)
nodes/fragment/14/node = SubResource("VisualShaderNodeVectorOp_r80rg")
nodes/fragment/14/position = Vector2(-140, 160)
nodes/fragment/15/node = SubResource("VisualShaderNodeVectorCompose_tv6t3")
nodes/fragment/15/position = Vector2(-60, -40)
nodes/fragment/17/node = SubResource("VisualShaderNodeCustom_ptuky")
nodes/fragment/17/position = Vector2(40, 160)
nodes/fragment/18/node = SubResource("VisualShaderNodeFloatOp_wpr7f")
nodes/fragment/18/position = Vector2(320, 80)
nodes/fragment/20/node = SubResource("VisualShaderNodeClamp_81lvi")
nodes/fragment/20/position = Vector2(240, 240)
nodes/fragment/connections = PackedInt32Array(10, 0, 9, 0, 5, 0, 9, 1, 9, 0, 15, 0, 15, 0, 14, 1, 12, 0, 14, 0, 14, 0, 17, 0, 17, 0, 20, 0, 20, 0, 18, 1, 18, 0, 0, 1, 18, 0, 0, 0)
